<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>주문하기</title>
</head>
<body class="p-3">
<h1>판매중</h1>
<hr>
<div id="product-list">

</div>
<script>
    const productListDiv = document.getElementById('product-list')

    // render product list
    const renderProductList = () => {
        fetch('/items').then(async response => {
            const productList = await response.json()
            productListDiv.classList.add('container')
            const rowDiv = document.createElement('div')
            rowDiv.classList.add('row')
            productListDiv.appendChild(rowDiv)

            for (const product of productList) {
                const colDiv = document.createElement('div')
                colDiv.classList.add('col-6', 'col-lg-3', 'p-3')
                const card = document.createElement('div')
                card.classList.add('card')

                const cardBody = document.createElement('div')
                cardBody.classList.add('card-body')

                const cardTitle = document.createElement('h5')
                cardTitle.classList.add('card-title')
                cardTitle.innerText = product.name
                cardBody.appendChild(cardTitle)
                const cardText = document.createElement('p')
                cardText.classList.add('card-text')
                cardText.innerText = product.exPrice
                cardBody.appendChild(cardText)

                const buyButton = document.createElement('a')
                buyButton.href = `/payment/item.html?id=${product.id}`
                buyButton.text = '사러가기'
                buyButton.classList.add('btn', 'btn-primary')
                cardBody.appendChild(buyButton)
                card.appendChild(cardBody)
                colDiv.appendChild(card)
                rowDiv.appendChild(colDiv)
            }
        })
    }
    renderProductList()
</script>
</body>
</html>
